<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- <link rel="stylesheet" href="static/css/style.css" type="text/css" media="all" /> -->

    <title>Sign Language Lessons</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <style>
        body {
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
            url("{{ url_for('static', filename='img/sign.webp') }}");
        }

        /* Add some basic styling for the video feed */
        .video-container {
            text-align: center;
            margin-top: 50px;
        }

        #video-feed {
            border: 2px solid #333;
            width: 640px;
            height: 480px;
        }
    </style>


</head>

<body>

    <div class="navbar">
        <!-- <div class="logo"><img src="static/img/logo-CityU-white.webp"></div> -->
        <div class="logo"><img src="{{ url_for('static', filename='img/logo.wight.png') }}"></div>

        <nav>
            <a href="{{ url_for('index') }}">Home</a>
            <a href="{{ url_for('lesson') }}">Lesson</a>
            <a href="{{ url_for('quiz_levels') }}">Quiz</a>
            <a href="{{ url_for('contact') }}">Contact</a>
        </nav>
    </div>



    <div class="container">

        <h1>Learn Sign Language (A-E)</h1>




        <div class="video-container">
            <h2>Live Video Feed</h2>
            <!-- Video stream will be displayed here -->
            <img id="video-feed" src="{{ url_for('video_feed') }}" alt="Video Feed">
        </div>




        <!-- Video element to show the webcam feed -->
        <!-- <video id="video" width="640" height="480" autoplay></video> -->
        <!-- <canvas id="canvas" style="display:none;"></canvas> -->

        <!-- Display the prediction result -->
        <!-- <h2>Prediction: <span id="prediction-result">Waiting...</span></h2> -->

        <!-- <script>
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const context = canvas.getContext('2d');
            const predictionResult = document.getElementById('prediction-result');

            // Get access to the user's webcam
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    video.srcObject = stream;
                })
                .catch(function (error) {
                    console.log("Error accessing webcam: " + error);
                });

            // Function to capture a frame and send it to the server
            function captureFrameAndPredict() {
                // Draw the current video frame on the canvas
                context.drawImage(video, 0, 0, canvas.width, canvas.height);

                // Convert the canvas to a data URL (base64 encoded image)
                const dataURL = canvas.toDataURL('image/png');

                // Send the image to the server for prediction
                fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ image: dataURL })
                })
                    .then(response => response.json())
                    .then(data => {
                        // Update the prediction result on the page
                        predictionResult.innerText = data.prediction;
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
            }

            // Capture a frame every 1 second (1000 milliseconds)
            setInterval(captureFrameAndPredict, 1000);
        </script>
 -->

        <div class="lesson-grid">
            <div class="lesson-card">
                <img src="{{ url_for('static', filename='img/' ) }}" alt="Sign for {{ letter }}">
            </div>
        </div>
        <a href="{{ url_for('quiz_levels') }}" class="quiz-link">Take the Quiz!</a>
    </div>
</body>

</html>